#!/bin/sh

#
# This file was generated by Chef.
# Do NOT modify this file by hand.
#

<% groups = ([@options[:user]] + @options[:runit_groups]).join(':') %>
exec 2>&1
cd <%= @options[:remote_fs] %>
exec chpst -u <%= groups %> -U <%= groups %> \
  env HOME=<%= @options[:remote_fs] %> \
  JENKINS_HOME=<%= @options[:remote_fs] %> \
  <%= @options[:java_bin] %> \
<%- if @options[:jvm_options] -%>
  <%= @options[:jvm_options] %> \
<%- end -%>
  -cp <%= @options[:slave_jar] %> \
  hudson.remoting.jnlp.Main \
  -headless \
  -workDir <%= @options[:remote_fs] %>/work \
  -direct <%= @options[:direct_host] %>:<%= @options[:direct_port] %> \
  -protocols JNLP4-connect \
  -instanceIdentity "<%= @options[:instance_identity] %>" <%= @options[:jnlp_secret] %> <%= @options[:slave_name] %>
